<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hunt-Brute - Jeu de RPG</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <header>
            <h1><i class="fas fa-dragon"></i> Hunt-Brute</h1>
        </header>

        <nav>
            <button id="nav-home"><i class="fas fa-home"></i> Accueil</button>
            <button id="nav-adventure"><i class="fas fa-map-marked-alt"></i> Aventure</button>
            <button id="nav-donjon"><i class="fas fa-dungeon"></i> Donjon</button>
            <button id="nav-multiplayer"><i class="fas fa-users"></i> Multijoueur</button>
            <button id="nav-inventory"><i class="fas fa-backpack"></i> Inventaire</button>
            <button id="nav-shop"><i class="fas fa-store"></i> Boutique</button>
            <button id="nav-companions"><i class="fas fa-user-friends"></i> Compagnons</button>
            <button id="nav-guilds"><i class="fas fa-flag"></i> Guildes</button>
            <button id="nav-crafting"><i class="fas fa-hammer"></i> Artisanat</button>
        </nav>

        <div id="player-info">
            <div class="player-stats">
                <span><i class="fas fa-user"></i> Nom: <span id="player-name"></span></span>
                <span><i class="fas fa-star"></i> Niveau: <span id="player-level"></span></span>
                <span><i class="fas fa-heart"></i> PV: <span id="player-hp"></span>/<span id="player-max-hp"></span></span>
                <span><i class="fas fa-fist-raised"></i> Attaque: <span id="player-attack"></span></span>
                <span><i class="fas fa-shield-alt"></i> Défense: <span id="player-defense"></span></span>
                <span><i class="fas fa-coins"></i> Or: <span id="player-gold"></span></span>
            </div>
            <div class="experience-bar">
                <div class="experience-fill"></div>
                <span class="experience-text">Expérience: <span id="player-exp"></span>/<span id="player-next-level-exp"></span></span>
            </div>
        </div>

        <div id="game-area">
            <div id="character-creation" class="game-section">
                <h2><i class="fas fa-user-plus"></i> Création de Personnage</h2>
                <input type="text" id="hero-name" placeholder="Nom du héros">
                <button id="create-character"><i class="fas fa-check"></i> Créer le personnage</button>
            </div>

            <div id="main-menu" class="game-section" style="display: none;">
                <button id="start-adventure"><i class="fas fa-hiking"></i> Commencer l'aventure</button>
                <button id="start-donjon"><i class="fas fa-dungeon"></i> Entrer dans le donjon</button>
                <button id="open-multiplayer"><i class="fas fa-users"></i> Mode multijoueur</button>
                <button id="open-inventory"><i class="fas fa-backpack"></i> Inventaire</button>
                <button id="open-shop"><i class="fas fa-store"></i> Boutique</button>
                <button id="manage-companions"><i class="fas fa-user-friends"></i> Gérer les compagnons</button>
                <button id="open-guilds"><i class="fas fa-flag"></i> Guildes</button>
                <button id="open-crafting"><i class="fas fa-hammer"></i> Artisanat</button>
                <button id="save-game"><i class="fas fa-save"></i> Sauvegarder</button>
                <button id="load-game"><i class="fas fa-folder-open"></i> Charger</button>
            </div>

            <div id="mission-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-scroll"></i> Missions disponibles</h2>
                <div class="mission-grid">
                    <!-- Les missions seront ajoutées dynamiquement ici -->
                </div>
            </div>

            <div id="battle-area" class="game-section" style="display: none;">
                <div id="combatants">
                    <div id="player-combat-info" class="combatant">
                        <h3 id="player-combat-name"></h3>
                        <div class="health-bar">
                            <div class="health-bar-fill"></div>
                            <span class="health-text"></span>
                        </div>
                        <div class="energy-bar">
                            <div class="energy-bar-fill"></div>
                            <span class="energy-text"></span>
                        </div>
                    </div>
                    <div id="enemy-combat-info" class="combatant">
                        <h3 id="enemy-combat-name"></h3>
                        <div class="health-bar">
                            <div class="health-bar-fill"></div>
                            <span class="health-text"></span>
                        </div>
                    </div>
                </div>
                <div id="battle-log"></div>
                <div id="combat-actions">
                    <button id="attack-button" class="action-button"><i class="fas fa-fist-raised"></i> Attaque</button>
                    <button id="defend-button" class="action-button"><i class="fas fa-shield-alt"></i> Défense</button>
                    <button id="special-button" class="action-button"><i class="fas fa-bolt"></i> Attaque Spéciale</button>
                </div>
            </div>

            <div id="inventory-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-backpack"></i> Inventaire</h2>
                <div id="inventory-items" class="inventory-grid"></div>
                <div id="equipped-items"></div>
            </div>

            <div id="shop-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-store"></i> Boutique</h2>
                <div id="shop-items"></div>
            </div>

            <div id="companions-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-user-friends"></i> Gestion des Compagnons</h2>
                <div id="companions-list"></div>
            </div>

            <div id="guild-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-flag"></i> Guildes</h2>
                <div id="guilds-list"></div>
            </div>

            <div id="crafting-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-hammer"></i> Artisanat</h2>
                <div id="crafting-recipes"></div>
            </div>

            <div id="multiplayer-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-users"></i> Mode Multijoueur</h2>
                <input type="text" id="room-id" placeholder="ID de la salle">
                <button id="join-room"><i class="fas fa-sign-in-alt"></i> Rejoindre la salle</button>
                <div id="players-list"></div>
                <div id="chat-area">
                    <div id="chat-messages"></div>
                    <input type="text" id="chat-input" placeholder="Votre message">
                    <button id="send-message"><i class="fas fa-paper-plane"></i> Envoyer</button>
                </div>
                <button id="challenge-player"><i class="fas fa-fist-raised"></i> Défier un joueur</button>
                <button id="trade-request"><i class="fas fa-exchange-alt"></i> Demander un échange</button>
            </div>

            <div id="trade-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-exchange-alt"></i> Échange</h2>
                <div id="trade-inventory"></div>
                <div id="offered-items"></div>
                <button id="confirm-trade"><i class="fas fa-check"></i> Confirmer l'échange</button>
                <button id="cancel-trade"><i class="fas fa-times"></i> Annuler l'échange</button>
            </div>

            <div id="donjon-area" class="game-section" style="display: none;">
                <h2><i class="fas fa-dungeon"></i> Donjon</h2>
                <div id="donjon-event"></div>
                <button id="next-donjon-event"><i class="fas fa-step-forward"></i> Continuer</button>
            </div>
        </div>
    </div>

    <div id="victory-modal" class="modal">
        <div class="modal-content">
            <h2>Victoire !</h2>
            <p>Expérience gagnée : <span id="exp-gained"></span></p>
            <p>Or gagné : <span id="gold-gained"></span></p>
            <h3>Objets trouvés :</h3>
            <ul id="loot-list"></ul>
            <button id="continue-button" class="action-button">Continuer</button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module">
        import { initializeGame } from './game.js';
        
        document.addEventListener('DOMContentLoaded', () => {
            initializeGame();
            
            // Gestionnaires d'événements pour les boutons
            document.getElementById('create-character').addEventListener('click', () => window.gameActions.createCharacter());
            document.getElementById('start-adventure').addEventListener('click', () => window.gameActions.startAdventure());
            document.getElementById('start-donjon').addEventListener('click', () => window.gameActions.startDonjon());
            document.getElementById('open-multiplayer').addEventListener('click', () => window.gameActions.openMultiplayer());
            document.getElementById('open-inventory').addEventListener('click', () => window.gameActions.openInventory());
            document.getElementById('open-shop').addEventListener('click', () => window.gameActions.openShop());
            document.getElementById('manage-companions').addEventListener('click', () => window.gameActions.manageCompanions());
            document.getElementById('open-guilds').addEventListener('click', () => window.gameActions.openGuilds());
            document.getElementById('open-crafting').addEventListener('click', () => window.gameActions.openCrafting());
            document.getElementById('save-game').addEventListener('click', () => window.gameActions.saveGame());
            document.getElementById('load-game').addEventListener('click', () => window.gameActions.loadGame());
            document.getElementById('attack-button').addEventListener('click', () => window.gameActions.playerAttack());
            document.getElementById('defend-button').addEventListener('click', () => window.gameActions.playerDefend());
            document.getElementById('special-button').addEventListener('click', () => window.gameActions.playerUseSpecial());
            document.getElementById('join-room').addEventListener('click', () => window.gameActions.joinRoom());
            document.getElementById('send-message').addEventListener('click', () => window.gameActions.sendChatMessage());
            document.getElementById('challenge-player').addEventListener('click', () => window.gameActions.initiateChallenge());
            document.getElementById('trade-request').addEventListener('click', () => window.gameActions.initiateTradeRequest());
            document.getElementById('confirm-trade').addEventListener('click', () => window.gameActions.confirmTrade());
            document.getElementById('cancel-trade').addEventListener('click', () => window.gameActions.cancelTrade());
            document.getElementById('next-donjon-event').addEventListener('click', () => window.gameActions.nextDonjonEvent());
            document.getElementById('continue-button').addEventListener('click', () => window.gameActions.continueAfterVictory());

            // Gestionnaires d'événements pour la navigation
            document.getElementById('nav-home').addEventListener('click', () => window.gameActions.showGameArea('main-menu'));
            document.getElementById('nav-adventure').addEventListener('click', () => {
                window.gameActions.showGameArea('mission-area');
                window.gameActions.startAdventure();
            });
            document.getElementById('nav-donjon').addEventListener('click', () => {
                window.gameActions.showGameArea('donjon-area');
                window.gameActions.startDonjon();
            });
            document.getElementById('nav-multiplayer').addEventListener('click', () => window.gameActions.openMultiplayer());
            document.getElementById('nav-inventory').addEventListener('click', () => window.gameActions.openInventory());
            document.getElementById('nav-shop').addEventListener('click', () => window.gameActions.openShop());
            document.getElementById('nav-companions').addEventListener('click', () => window.gameActions.manageCompanions());
            document.getElementById('nav-guilds').addEventListener('click', () => window.gameActions.openGuilds());
            document.getElementById('nav-crafting').addEventListener('click', () => window.gameActions.openCrafting());
        });
    </script>
</body>
</html>
